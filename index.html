<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="程序界的小学生">
<meta property="og:type" content="website">
<meta property="og:title" content="Zomone">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Zomone">
<meta property="og:description" content="程序界的小学生">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zomone">
<meta name="twitter:description" content="程序界的小学生">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Zomone</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zomone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Good artists copy, great artists steal.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/31/2018有感/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zomeone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zomone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/31/2018有感/" itemprop="url">2018有感</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-31T23:04:40+08:00">
                2018-12-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>马上就要跨入 2019 年了，看到朋友圈都在对过去的一年纷纷进行总结，我也免不了俗，记录一下过去一年内的所见所得吧。</p>
<h2 id="1-工作方面"><a href="#1-工作方面" class="headerlink" title="1. 工作方面"></a>1. 工作方面</h2><p>一直为踏入软件行业而感到高兴，也一直有让自己更加强大的想法，也有自己的傲气，一直自命不凡，但是随着工作时间越长越发现自己的普通。</p>
<h3 id="1-1-不以出身论短长"><a href="#1-1-不以出身论短长" class="headerlink" title="1.1 不以出身论短长"></a>1.1 不以出身论短长</h3><p>这种想法其实在毕业时候已经告诉自己，虽然毕业已经两年，但是还会有所谓 ”出身学校“ 的比较。这种想法是错误的，应该坚决杜绝以学校、学历来评判别人。身边有非计算机专业出身的同事和老师比我做的好，也有专科等所谓 ”较差“ 的学校毕业的给我帮助。闻道有先后，术业有专攻，对于身边的任何人都应该以谦虚学习态度对待，对于有高学历，顶级学府深造的老师更是需要我去学习和审视自我。</p>
<h3 id="1-2-掌握正确的工作方法"><a href="#1-2-掌握正确的工作方法" class="headerlink" title="1.2 掌握正确的工作方法"></a>1.2 掌握正确的工作方法</h3><p>在公司待久了，维护的模块较多。每天都有很多人要集成、联调、测试等等。每天实际的开发时间其实很少，导致自己每天都在不停维护，不停重复，总结下来有以下改进：</p>
<ol>
<li>优化文档说明，针对一些基础技术说明可以详细些。</li>
<li>尽可能提高自动化。因为涉及到领导和重要客户的数据，有些自动化的项目放不开手脚，导致效率低下</li>
<li>学会拒绝。不能轻易答应别人的请求，首先要考虑其合理性，不合理的请求一定要尽快拒绝；其次再考虑如果自己帮忙是否会影响自己当前的工作和时间，盲目当好人是会累死的。</li>
<li>对于一些临时的调试或者需求调整，需要学会 ”讨价还价“。比如：需要缩短开发周期的，可以说明不能保证质量；需要和你协调接口的，可以考虑 ”如果需要我xx, 那么你那边也需要xx“ 这样将开发的责任再回挡回去。</li>
</ol>
<h3 id="1-3-理性认识自己"><a href="#1-3-理性认识自己" class="headerlink" title="1.3 理性认识自己"></a>1.3 理性认识自己</h3><p>自己在公司待了一些年，掌握了一些重要的模块，很容易滋生膨胀感。希望自己永远不要有这样的想法，适当的傲气可以为自己加油打气，过渡的膨胀会爆掉自己。平台是很重要的，没有了当前的平台，凭着自己手里的技术能做得比现在更好吗？平台没有了我，换一个人来取代我干相同的活，是不是也可以？在 ”感觉自己是巨星“ 的时候多问问上面两个问题，我觉得可以更加理性的认识自己，摆正自己的位置。到时候到底做什么样的决定我想应该都是正确的。</p>
<h2 id="2-学习"><a href="#2-学习" class="headerlink" title="2. 学习"></a>2. 学习</h2><h3 id="2-1-学习进度"><a href="#2-1-学习进度" class="headerlink" title="2.1 学习进度"></a>2.1 学习进度</h3><p>今年的学习收获从对个人技能的提升速度而言较之前的两年少，很明显感觉自己今年充电不足，没有之前两年那样充实。分析原因有一下几点：</p>
<ol>
<li>前几年完成的是个人从小白到初级的变化，所需要掌握的技术都相对简单，可能简单阅读文档或者查询资料即可完成。这一部分的知识的特点就是简单易懂，短时间内的学习可以给人很大的满足感和获取知识的愉悦。但是从去年开始，基本的技术要点已经满足不了新的挑战和问题，所以对于某个点的学习投入和产出比和之前有较大差别，导致心里感觉进步速度不高。这是符合学习曲线的，目前没有好的解决方案，只能提示告诉自己不能过于心急。</li>
<li>学习计划混乱。软件后端需要掌握的领域很多，而我今年想学习的方面也太多，每天都在不停地学习各种零星的技术文章。每天都学得很多，很杂，但是却不成体系。从目前看，微信或者头条等媒体的推荐功能比较智能，但是过于碎片化，让自己没有了独立思考的空间。纷杂的信息推送让自己觉得还有这么多没了解，增加了自己的恐慌，也让自己沉浸在一种自认为很忙的感觉中，但是效果却并不好。</li>
</ol>
<h3 id="2-2-学习广度"><a href="#2-2-学习广度" class="headerlink" title="2.2 学习广度"></a>2.2 学习广度</h3><p>目前学习的范畴都集中在技术类，包括平时看的资料博客也都是技术相关。知识获取的领域还是过于单一，以后应该适当增加其他方面，小说是一个不错的领域，可以尝试一下。</p>
<h3 id="2-3-学习深度"><a href="#2-3-学习深度" class="headerlink" title="2.3 学习深度"></a>2.3 学习深度</h3><p>去年对于技术方面的学习主要集中在 SpringBoot 和 SpringSecurity。针对以及平时一些相关的点进行了使用和源码的阅读，对于更加深层次的研究还不足，新年可以继续框架的学习。</p>
<h2 id="3-生活"><a href="#3-生活" class="headerlink" title="3. 生活"></a>3. 生活</h2><h3 id="3-1-身体健康"><a href="#3-1-身体健康" class="headerlink" title="3.1 身体健康"></a>3.1 身体健康</h3><p>体重没有下降，感觉过劳肥是个恶性循环，工作忙，缺少运动，脂肪累积，身体不适，效率低下，工作忙。。。。只有跳出这个的怪圈，才能解决当前窘境。所以后半年需要健身了。</p>
<h3 id="3-2-城市"><a href="#3-2-城市" class="headerlink" title="3.2 城市"></a>3.2 城市</h3><p>对于目前这座城市，我并没有好感。虽然是在不断发展的，但是对比一线城市有点尴尬，物价高成本高。将来到底是否会留在这里尚不可知，但是我估计得到这个答案的时间不会太久了。</p>
<h2 id="4-总结"><a href="#4-总结" class="headerlink" title="4. 总结"></a>4. 总结</h2><p>过去的一年相对还是比较迷的，没有太大的成绩，感觉自己重复了 365 天。每天按时上班，按时加班，按时比别人加更多的班。每周周一盼周末，周末宅一天。每天都在告诉自己明天要怎样怎样，但是第二天对自己爽约，继续明日复明日的空想。</p>
<p>是时候做出些改变了，你还没到三十呢!</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/09/JDK8新特性使用注意事项/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zomeone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zomone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/JDK8新特性使用注意事项/" itemprop="url">JDK8新特性使用注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T12:07:27+08:00">
                2018-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java-se/" itemprop="url" rel="index">
                    <span itemprop="name">java se</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JDK8-新特性-使用注意事项"><a href="#JDK8-新特性-使用注意事项" class="headerlink" title="JDK8 新特性 使用注意事项"></a>JDK8 新特性 使用注意事项</h1><h2 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h2><ol>
<li>Optional 是基于值的类，所以当涉及到识别敏感的操作（比如引用判等 == ，哈希值比较或者同步）时，使用 Optional 可能有不可预测的结果，所以这些场景下应该避免使用 Optional。</li>
<li>empty() 是一个静态工厂方法，返回一个空的容器。当判断是否存在值的时候不应该将这个 Optional 对象和 <code>Optional.empty() == obj</code> 判等。因为无法确保 <code>empty()</code> 是单例的。判断元素是否为空应该使用 <code>isPresent()</code>。</li>
<li><code>filter()</code> 方法会在满足给定的 <code>Predicate</code> 的情况下返回一个包含该元素的 Optional, 否则返回一个空的 Optional。</li>
<li><code>map</code> 接收的是一个 <code>Function</code></li>
<li><p><code>flapMap</code> 类似于 <code>map</code>,但是，从说明文档可以看出，<code>map</code> 基于，而 <code>flatMap</code> 基于一个已经是 <code>Optional</code> 的参数进行计算，当被调用时，<code>flapMap</code> 不会在这个 <code>Optional</code> 外再多包装一层的 <code>Optional</code>。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">Optional&lt;U&gt; <span class="title">map</span><span class="params">(Function&lt;? <span class="keyword">super</span> T,? extends U&gt; mapper</span></span></span><br></pre></td></tr></table></figure>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">Optional&lt;U&gt; <span class="title">flatMap</span><span class="params">(Function&lt;? <span class="keyword">super</span> T,Optional&lt;U&gt;&gt; mapper)</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>orElseThrow</code> 可以在容器不包含元素时抛出异常，方法接收一个 <code>Supplier</code>, 如果要抛出的异常有无参构造方法的话，可以传入其默认构造方法的应用，例如：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IllegalStateException::<span class="keyword">new</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Optional 的 <code>orElse()</code> 和 <code>orElseGet()</code> 两个方法在包装器中没有元素的效果是一致的，都会调用并生成默认值，但是当包装其中元素存在的时候，<code>orElse()</code> 方法一定会调用，而 <code>orElseGet()</code> 方法却不会,这在默认方法是一个涉及到 I/O 时候代价会比较大。可以将某个方法 <code>getDefault()</code> 作为参数传入 <code>orElse()</code> 和 <code>orElseGet()</code> 查看方法的调用情况来判断。</p>
</li>
</ol>
<h2 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h2><p>Stream 的操作可以分为中间操作（Intermediate Operation） 和 终结操作（Terminate Operation）。中间操作可以链式调用。</p>
<p>对流的操作不会影响到原数据。</p>
<h3 id="生成-Stream"><a href="#生成-Stream" class="headerlink" title="生成 Stream"></a>生成 Stream</h3><h4 id="builder-创建-Stream"><a href="#builder-创建-Stream" class="headerlink" title="builder 创建 Stream"></a>builder 创建 Stream</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; streamBuilder =</span><br><span class="line">  Stream.&lt;String&gt;builder().add(<span class="string">"a"</span>).add(<span class="string">"b"</span>).add(<span class="string">"c"</span>).build();</span><br></pre></td></tr></table></figure>
<p>如果需要知道 Stream 元素的类型，使用上述方式，否则会生成一个元素为 Object 的 Stream。</p>
<h4 id="generate-创建-Stream"><a href="#generate-创建-Stream" class="headerlink" title="generate 创建 Stream"></a>generate 创建 Stream</h4><p>generate 接受一个 Supplier<t> 来生成元素。由于 Stream 可以是无限的，所以我们可以在 gererate 的时候指定 Stream 的大小。</t></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; streamGenerated =</span><br><span class="line">  Stream.generate(() -&gt; <span class="string">"element"</span>).limit(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<h4 id="iterate-创建-Stream"><a href="#iterate-创建-Stream" class="headerlink" title="iterate 创建 Stream"></a>iterate 创建 Stream</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; streamIterated = Stream.iterate(<span class="number">40</span>, n -&gt; n + <span class="number">2</span>).limit(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>
<p>第一个参数 40 是 Stream 的第一个元素，后面的元素会由第二个参数定义的 function 逐个生成，直至达到预定的数量。</p>
<h3 id="基本类型的-Stream"><a href="#基本类型的-Stream" class="headerlink" title="基本类型的 Stream"></a>基本类型的 Stream</h3><p>由于Stream<t> 使用了泛型，但是基本类型没法作为参数（这里当然不是用基本类型的包装类，试想我们操作的数据就是基本类型的，都转换为包装类存在开销问题），支持 int, long 和 double 的 Stream。分别是 IntStream, LongStream, DoubleStream。可以缓解自动装箱带来的性能开销。</t></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntStream intStream = IntStream.range(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">LongStream longStream = LongStream.rangeClosed(<span class="number">1</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>上面第一行代码会从开始值到结束值按照步进值为1 生成 Stream。结果不包含这两个值。<br>第二行代码从开始值到结束值按照步进值为1 生成 Stream。结果包含这两个值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Random random = <span class="keyword">new</span> Random();</span><br><span class="line">DoubleStream doubleStream = random.doubles(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>Java8 的 Random 也提供了大范围内的基本类型的随机数 Stream。如上述代码。会生成包含三个随机数的 double 类型的 Stream。</p>
<h3 id="String-的-Stream"><a href="#String-的-Stream" class="headerlink" title="String 的 Stream"></a>String 的 Stream</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IntStream streamOfChars = <span class="string">"abc"</span>.chars();</span><br></pre></td></tr></table></figure>
<p>由于 Java8 没有 CharStream，所以 char 的 Stream 用 IntStream 来代替。String 的 chars() 返回的就是 IntStream。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; streamOfString = Pattern.compile(<span class="string">", "</span>).splitAsStream(<span class="string">"a, b, c"</span>);</span><br></pre></td></tr></table></figure>
<p>上面的代码使用正则匹配来将字符串切分为多个元素的 Stream。</p>
<h3 id="File-的-Stream"><a href="#File-的-Stream" class="headerlink" title="File 的 Stream"></a>File 的 Stream</h3><p>Java NIO 类允许通过 <code>lines()</code> 生成文本文件的 Stream<string>，文件的每一行都变成了 Stream 的元素。</string></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Path path = Paths.get(<span class="string">"C:\\file.txt"</span>);</span><br><span class="line">Stream&lt;String&gt; streamOfStrings = Files.lines(path);</span><br><span class="line">Stream&lt;String&gt; streamWithCharset = </span><br><span class="line">  Files.lines(path, Charset.forName(<span class="string">"UTF-8"</span>));</span><br></pre></td></tr></table></figure>
<h3 id="Reduction"><a href="#Reduction" class="headerlink" title="Reduction"></a>Reduction</h3><p>Stream 默认支持多种聚合的方法 count(), max(), min(), sum()，这些都会计算 Stream 的某个基本类型的指标，为我们常用的计算提供了默认实现。但是如果我们想要实现自定义的一些操作如何处理呢？Java8 提供了 <code>reduce()</code> 和 <code>collect()</code> 两个方法</p>
<h4 id="1-reduce"><a href="#1-reduce" class="headerlink" title="1. reduce()"></a>1. reduce()</h4><p>这个方法有三个变体，它们之间通过方法签名和返回类型区分：</p>
<p><strong>identity</strong> 如果 Stream 是空的那么就通过它来指定累加器的初始化值<br><strong>accumulator</strong> 定义了元素累加逻辑的函数，在每次迭代中都会创建新的值，所以最终新建的值会和 Stream 元素数量一样多，但是只有最后一个是有用的，所以对性能都影响较大。<br><strong>combiner</strong> 对累加器的结果计算的函数，只有在 parallel 模式下才会进行计算</p>
<p>下面是三者的使用示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OptionalInt reduced =</span><br><span class="line">  IntStream.range(<span class="number">1</span>, <span class="number">4</span>).reduce((a, b) -&gt; a + b);</span><br></pre></td></tr></table></figure>
<p>reduce = 6 (1 + 2 + 3)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int reducedTwoParams =</span><br><span class="line">  IntStream.range(1, 4).reduce(10, (a, b) -&gt; a + b);</span><br></pre></td></tr></table></figure>
<p>reduce = 16 (10 + 1 + 2 + 3)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int reducedParams = Stream.of(1, 2, 3)</span><br><span class="line">  .reduce(10, (a, b) -&gt; a + b, (a, b) -&gt; &#123;</span><br><span class="line">     log.info(&quot;combiner was called&quot;);</span><br><span class="line">     return a + b;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>结果仍然是 16，因为不是在 paraller 模式下，所以 combiner 不会计算，要使它生效，可以改为 parallerStream,如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nt reducedParallel = Arrays.asList(1, 2, 3).parallelStream()</span><br><span class="line">    .reduce(10, (a, b) -&gt; a + b, (a, b) -&gt; &#123;</span><br><span class="line">       log.info(&quot;combiner was called&quot;);</span><br><span class="line">       return a + b;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>这样的结果是 36， combiner 被调用了两次。计算过程是这样的：<br>accutor 计算了三次，每次都会把 Stream 中的值加上初始值：<br>10 + 1 = 11<br>10 + 2 = 12<br>10 + 3 = 13<br>然后 combiner 计算两次<br>12 + 13 = 25;<br>25 + 11 = 36</p>
<h4 id="2-collect"><a href="#2-collect" class="headerlink" title="2. collect()"></a>2. collect()</h4><p><code>collect()</code> 主要用于将 Stream 转化为 Collection ,方便后续对 Collection 的操作和计算。</p>
<p>计算平均数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> averagePrice = productList.stream()</span><br><span class="line">  .collect(Collectors.averagingInt(Product::getPrice));</span><br></pre></td></tr></table></figure>
<p>计算总数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> summingPrice = productList.stream()</span><br><span class="line">  .collect(Collectors.summingInt(Product::getPrice));</span><br></pre></td></tr></table></figure>
<p>averagingXX(), summingXX(), summarizingXX()  既可以用于基本类（int, long, double），也可以用于基本类的包装类(Integer, Long, Double)。</p>
<p>计算统计信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntSummaryStatistics statistics = productList.stream()</span><br><span class="line">  .collect(Collectors.summarizingInt(Product::getPrice));</span><br></pre></td></tr></table></figure>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>每个 Stream 只能被使用一次，如果想重复使用结果，则需要把 Stream 转化为某些集合。</li>
<li>Stream 只能有一个 terminal operation</li>
<li>Stream Intermediate operation 是 Lazy Invocation的，只有在调用 terminal operation 的时候才会触发 intermediate operation 的调用。</li>
<li>注意最好把 skip(), filter(), distinct() 方法写在前面，这样避免不必要的方法调用</li>
<li>在生产环境中，初始化的流不消耗的话会导致内存溢出。</li>
</ol>
<h3 id="写法转换"><a href="#写法转换" class="headerlink" title="写法转换"></a>写法转换</h3><h4 id="1-遍历"><a href="#1-遍历" class="headerlink" title="1. 遍历"></a>1. 遍历</h4><p>JDK8 之前</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (String string : list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (string.contains(<span class="string">"a"</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用JDK8</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isExist = list.stream().anyMatch(element -&gt; element.contains(<span class="string">"a"</span>));</span><br></pre></td></tr></table></figure>
<h4 id="2-过滤"><a href="#2-过滤" class="headerlink" title="2. 过滤"></a>2. 过滤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; stream = list.stream().filter(element -&gt; element.contains(<span class="string">"d"</span>));</span><br></pre></td></tr></table></figure>
<h4 id="3-Map-flatMap"><a href="#3-Map-flatMap" class="headerlink" title="3. Map/flatMap"></a>3. Map/flatMap</h4><p>区分使用 map 和 flapMap 的场景。<br>一般情况下使用 map 或者 flapMap都是需要我们嵌套调用 get 方法来获取最深层的那个实体场景下使用的。当每层嵌套返回的都是某个具体的类，那么我们可以直接使用map;如果我们在设计类的时候或者实现 get 方法的时候，返回的不是具体的属性的类，而是这个属性的 Optional，这种情况下使用 map 就会出问题，因为相当于拿到的是嵌套了多层 Optional 的属性类，而我们实际想要的只是一个包裹了这个属性元素的Optional。</p>
<p>EG：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Persion</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    Car car;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    String brand;</span><br><span class="line">    Insurance insurance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Insurance</span> </span>&#123;</span><br><span class="line">    String name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Person person = <span class="keyword">new</span> Person();</span><br><span class="line">    </span><br><span class="line">    Optional&lt;String&gt; insuranceName = Optional.ofNullable(person)</span><br><span class="line">    .map(Persion::getCar)</span><br><span class="line">    .map(Car::getInsurance)</span><br><span class="line">    .map(Insurance::getName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>假如我们改一下实体，从领域实体触发，一个人有没有车是不确定的，所以 Person 的 car 属性我们用 Optional<car> 来实现，同理 Car 的保险属性我们用 Optional<insurance> 来实现。</insurance></car></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    Optional&lt;Car&gt; car;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    String brand;</span><br><span class="line">    Optional&lt;Insurance&gt; insurance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Insurance</span> </span>&#123;</span><br><span class="line">    String name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Person person = <span class="keyword">new</span> Person();</span><br><span class="line">    </span><br><span class="line">    Optional&lt;String&gt; insuranceName = Optional.ofNullable(person)</span><br><span class="line">    .flatMap(Persion::getCar)</span><br><span class="line">    .flatMap(Car::getInsurance)</span><br><span class="line">    .map(Insurance::getName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-匹配"><a href="#4-匹配" class="headerlink" title="4. 匹配"></a>4. 匹配</h4><p>anyMatch(), allMatch(), noneMatch()</p>
<h4 id="5-Reduction"><a href="#5-Reduction" class="headerlink" title="5. Reduction"></a>5. Reduction</h4><p>数组求和</p>
<h2 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h2><ol>
<li><p>静态方法<br> Class::methodName</p>
</li>
<li><p>实例方法</p>
<p> instance::methodName</p>
</li>
<li><p>某个特定类对象的方法</p>
<p> Type::methodName</p>
</li>
<li><p>引用构造器</p>
<p> ClassName::new</p>
</li>
</ol>
<h2 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h2><h2 id="Lamda-Expression-Tips"><a href="#Lamda-Expression-Tips" class="headerlink" title="Lamda Expression Tips"></a>Lamda Expression Tips</h2><h3 id="1-尽可能使用标准的-Functional-Interface-比如-Java8-自带的-Functional-Consumer-Supplier-Predicate-等"><a href="#1-尽可能使用标准的-Functional-Interface-比如-Java8-自带的-Functional-Consumer-Supplier-Predicate-等" class="headerlink" title="1. 尽可能使用标准的 Functional Interface, 比如 Java8 自带的 Functional, Consumer, Supplier, Predicate 等"></a>1. 尽可能使用标准的 Functional Interface, 比如 Java8 自带的 Functional, Consumer, Supplier, Predicate 等</h3><h3 id="2-使用-FunctionalInterface-注解。这可以在我们更改一个原先的-FunctionalInterface-的结构（尤其是增加一个抽象方法）的时候，编译报错，防止我们意外更改。"><a href="#2-使用-FunctionalInterface-注解。这可以在我们更改一个原先的-FunctionalInterface-的结构（尤其是增加一个抽象方法）的时候，编译报错，防止我们意外更改。" class="headerlink" title="2. 使用 @FunctionalInterface 注解。这可以在我们更改一个原先的 FunctionalInterface 的结构（尤其是增加一个抽象方法）的时候，编译报错，防止我们意外更改。"></a>2. 使用 <code>@FunctionalInterface</code> 注解。这可以在我们更改一个原先的 FunctionalInterface 的结构（尤其是增加一个抽象方法）的时候，编译报错，防止我们意外更改。</h3><h3 id="3-在-Functional-Interface-中不要滥用-default-方法"><a href="#3-在-Functional-Interface-中不要滥用-default-方法" class="headerlink" title="3. 在 Functional Interface 中不要滥用 default 方法"></a>3. 在 Functional Interface 中不要滥用 default 方法</h3><h3 id="4-对于-Functional-Interface-来说，编译器允许我们实例化一个接口实例（匿名内部类？），这样写代码是很笨重的，最好用-lamda-表达式。"><a href="#4-对于-Functional-Interface-来说，编译器允许我们实例化一个接口实例（匿名内部类？），这样写代码是很笨重的，最好用-lamda-表达式。" class="headerlink" title="4. 对于 Functional Interface 来说，编译器允许我们实例化一个接口实例（匿名内部类？），这样写代码是很笨重的，最好用 lamda 表达式。"></a>4. 对于 Functional Interface 来说，编译器允许我们实例化一个接口实例（匿名内部类？），这样写代码是很笨重的，最好用 lamda 表达式。</h3><h3 id="5-避免使用-Functional-Interface-作为重载参数，可能会造成运行时方法引用错误。"><a href="#5-避免使用-Functional-Interface-作为重载参数，可能会造成运行时方法引用错误。" class="headerlink" title="5. 避免使用 Functional Interface 作为重载参数，可能会造成运行时方法引用错误。"></a>5. 避免使用 Functional Interface 作为重载参数，可能会造成运行时方法引用错误。</h3><p>例如下面的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Adder</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">add</span><span class="params">(Function&lt;String, String&gt; f)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Consumer&lt;Integer&gt; f)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdderImpl</span> <span class="keyword">implements</span> <span class="title">Adder</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">add</span><span class="params">(Function&lt;String, String&gt; f)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> f.apply(<span class="string">"Something "</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Consumer&lt;Integer&gt; f)</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当运行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String r = adderImpl.add(a -&gt; a + <span class="string">" from lambda"</span>);</span><br></pre></td></tr></table></figure>
<p>会报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">reference to add is ambiguous both method </span><br><span class="line">add(java.util.function.Function&lt;java.lang.String,java.lang.String&gt;) </span><br><span class="line">in fiandlambdas.AdderImpl and method </span><br><span class="line">add(java.util.function.Consumer&lt;java.lang.Integer&gt;) </span><br><span class="line">in fiandlambdas.AdderImpl match</span><br></pre></td></tr></table></figure>
<p>对于这种情况我们通常有两种解决方案：</p>
<ol>
<li>修改两个方法的名字不一致即可</li>
<li><p>调用时候进行类型转换，如下面的代码：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String r = Adder.add((Function) a -&gt; a + <span class="string">" from lambda"</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="6-不要把-Lamda-Expression-当成内部类"><a href="#6-不要把-Lamda-Expression-当成内部类" class="headerlink" title="6. 不要把 Lamda Expression 当成内部类"></a>6. 不要把 Lamda Expression 当成内部类</h3><p>Lamda Expression 和 内部类的最大区别在于作用域（Scope）不同。</p>
<p>内部类会创建一个属于这个内部类的作用域。在这个作用域内可以初始化一个和所在类或者方法内同名的本地变量，也可以使用 this 来指代当前的内部类。</p>
<p>Lamda Expression 作用于当前的闭包作用域，在 Lamda Expression 的代码块内不能修改闭包内的变量，而在 Lamda Expression 方法体内的 this 指代的是所在闭包。</p>
<p>如下面的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UseFoo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String value = <span class="string">"Enclosing scope value"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scopeExperiment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Foo fooIC = <span class="keyword">new</span> Foo() &#123;</span><br><span class="line">            String value = <span class="string">"Inner class value"</span>;</span><br><span class="line">     </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">method</span><span class="params">(String string)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        String resultIC = fooIC.method(<span class="string">""</span>);</span><br><span class="line">     </span><br><span class="line">        Foo fooLambda = parameter -&gt; &#123;</span><br><span class="line">            String value = <span class="string">"Lambda value"</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">        &#125;;</span><br><span class="line">        String resultLambda = fooLambda.method(<span class="string">""</span>);</span><br><span class="line">     </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Results: resultIC = "</span> + resultIC + </span><br><span class="line">          <span class="string">", resultLambda = "</span> + resultLambda;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行之后打印结果为 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Results: resultIC = Inner class value, resultLambda = Enclosing scope value</span><br></pre></td></tr></table></figure>
<p>所以在 IC 内使用 <code>this.value</code> 会使用内部类的局部变量，而使用 Lamda 的 <code>this.value</code> 则接触到的是 UseFoo 这个类实例的 value 变量，而不是定义在 Lamda 内部的 value。</p>
<h3 id="7-保持-Lamda-Expression-尽可能短和易懂"><a href="#7-保持-Lamda-Expression-尽可能短和易懂" class="headerlink" title="7. 保持 Lamda Expression 尽可能短和易懂"></a>7. 保持 Lamda Expression 尽可能短和易懂</h3><p>Lamda 的方法体尽可能一行或者更短，而不是大块的代码块。因为 Lamda 首先应该是个<strong>表达式</strong>，应该尽可能的描述所能提供的功能。有下面几种实现方式：</p>
<h4 id="7-1-避免在-Lamda-内使用代码块"><a href="#7-1-避免在-Lamda-内使用代码块" class="headerlink" title="7.1 避免在 Lamda 内使用代码块"></a>7.1 避免在 Lamda 内使用代码块</h4><p>Bad Impl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Foo foo = parameter -&gt; &#123; String result = <span class="string">"Something "</span> + parameter; </span><br><span class="line">    <span class="comment">//many lines of code </span></span><br><span class="line">    <span class="keyword">return</span> result; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Good Impl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Foo foo = parameter -&gt; buildString(parameter);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">buildString</span><span class="params">(String parameter)</span> </span>&#123;</span><br><span class="line">    String result = <span class="string">"Something "</span> + parameter;</span><br><span class="line">    <span class="comment">//many lines of code</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然也不能死板教条，两三行还是可以的。为了两三行代码抽一个方法出来不值得。</p>
<h4 id="7-2-避免定义参数类型"><a href="#7-2-避免定义参数类型" class="headerlink" title="7.2 避免定义参数类型"></a>7.2 避免定义参数类型</h4><p>大多数的编译器可以通过类型引用推断参数类型的，所以在形参加上类型是可选的，所以可以忽略掉。</p>
<p>Bad Impl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(String a, String b) -&gt; a.toLowerCase() + b.toLowerCase();</span><br></pre></td></tr></table></figure>
<p>Good Impl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(a, b) -&gt; a.toLowerCase() + b.toLowerCase();</span><br></pre></td></tr></table></figure>
<h4 id="7-3-避免在单个参数时使用括号"><a href="#7-3-避免在单个参数时使用括号" class="headerlink" title="7.3 避免在单个参数时使用括号"></a>7.3 避免在单个参数时使用括号</h4><p>只有在无参数或者多个参数的时候才要求使用括号。所以只有一个参数的情况下，不适用括号是可以的。</p>
<h4 id="7-4-避免使用-return-语句和大括号"><a href="#7-4-避免使用-return-语句和大括号" class="headerlink" title="7.4 避免使用 return 语句和大括号"></a>7.4 避免使用 return 语句和大括号</h4><p>Bad Impl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a -&gt; &#123;return a.toLowerCase()&#125;;</span><br></pre></td></tr></table></figure>
<p>Good Impl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a -&gt; a.toLowerCase();</span><br></pre></td></tr></table></figure>
<h4 id="7-5-使用方法引用"><a href="#7-5-使用方法引用" class="headerlink" title="7.5 使用方法引用"></a>7.5 使用方法引用</h4><p>主要目的在于增加可读性</p>
<p>Bad Impl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a -&gt; a.toLowerCase();</span><br></pre></td></tr></table></figure>
<p>Good Impl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String::toLowerCase;</span><br></pre></td></tr></table></figure>
<h3 id="8-使用-“effective-final”-变量"><a href="#8-使用-“effective-final”-变量" class="headerlink" title="8 使用 “effective final” 变量"></a>8 使用 “effective final” 变量</h3><p>在 Lamda 中访问 non-final 的变量会报编译错误，但是这并不意为这你需要把每个变量都标记为 final 的。<br>如果某个变量只被赋值一次，那么编译器就可以把这个变量看做是 final 的。在 Lamda 内使用这种变量是安全的，因为编译器会控制这些变量的状态，并在任何尝试改变这些变量发生时触发<strong>编译期</strong>的错误（是否意味着我们直接操作 class 文件的话可以绕过这个限制？）。下面的代码不能编译通过：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String localVariable = <span class="string">"Local"</span>;</span><br><span class="line">    Foo foo = parameter -&gt; &#123;</span><br><span class="line">        String localVariable = parameter;</span><br><span class="line">        <span class="keyword">return</span> localVariable;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>错误提示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Variable &apos;localVariable&apos; is already defined in the scope.</span><br></pre></td></tr></table></figure>
<h3 id="9-保护变量突变"><a href="#9-保护变量突变" class="headerlink" title="9 保护变量突变"></a>9 保护变量突变</h3><p>使用 Lamda 的一个目的是并行计算，这也就意味着在线程安全方面是很安全的。</p>
<p>上面第 8 点说的 effective final 变量对线程安全是有帮助的，但是也不能覆盖全部的情况。Lamda 不能在闭包范围内更新一个对象的属性，但是对于突变的对象变量这种情况而言，在 Lamda 内的 state 是可以更新的。看下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] total = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1</span>];</span><br><span class="line">Runnable r = () -&gt; total[<span class="number">0</span>]++;</span><br><span class="line">r.run();</span><br></pre></td></tr></table></figure>
<p>这段代码是合法的，因为所有变量都是等效 final 的，但是在执行完 Lamda 之后对象的状态和执行之前一样吗？答案是否定的。<br>这个例子提醒我们避免可能导致期望值外的突变的代码。</p>
<p>参考资料</p>
<ol>
<li><a href="https://www.baeldung.com/java-optional" target="_blank" rel="noopener">https://www.baeldung.com/java-optional</a>  Optional 第7点摘自这篇文章</li>
<li><a href="https://github.com/eugenp/tutorials/tree/master/core-java-8" target="_blank" rel="noopener">https://github.com/eugenp/tutorials/tree/master/core-java-8</a> JDK8 的一些介绍</li>
<li><a href="https://www.baeldung.com/java-filter-stream-of-optional" target="_blank" rel="noopener">https://www.baeldung.com/java-filter-stream-of-optional</a></li>
<li><a href="http://blog.joda.org/2015/08/java-se-8-optional-pragmatic-approach.html" target="_blank" rel="noopener">暂时访问不了的博客</a></li>
<li><a href="http://blog.joda.org/2015/08/java-se-8-optional-pragmatic-approach.html" target="_blank" rel="noopener">暂时访问不了的博客</a></li>
<li><a href="https://www.baeldung.com/java-fork-join" target="_blank" rel="noopener">https://www.baeldung.com/java-fork-join</a></li>
<li><a href="https://www.baeldung.com/java-executor-service-tutorial" target="_blank" rel="noopener">https://www.baeldung.com/java-executor-service-tutorial</a></li>
<li><a href="https://www.baeldung.com/java-8-streams" target="_blank" rel="noopener">https://www.baeldung.com/java-8-streams</a> covered</li>
<li><a href="https://www.baeldung.com/java-8-lambda-expressions-tips" target="_blank" rel="noopener">Lambda Expressions and Functional Interfaces: Tips and Best Practices</a> covered</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/20/正式开始blog记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zomeone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zomone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/20/正式开始blog记录/" itemprop="url">正式开始blog记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-20T22:28:15+08:00">
                2018-06-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>工作一段时间了，最近项目有点烦，正好想起了很久没碰过的个人blog。 之前没有整理个人 blog 原因有：</p>
<ol>
<li>没有充足时间整理</li>
<li>面子问题。私以为个人才疏学浅，怕个人观点贻笑大方</li>
</ol>
<p>后来发现，时间总是挤出来的，就算不去整理 blog ,也会有其它事情占据自己的时间；至于面子问题，本来就是不停追风筝的人，无所谓面子，更何况只是记录自己心得，所幸也就放开吧。</p>
<p>其实想要自己的 blog 很久了，只是之前没有认真维护。逐渐从 wordpress 过渡到 hexo，感叹还是简单易用是王道。过去的个人知识总结大多以某云笔记和个人整理的 markdown 和 GitBook 为主,总感觉差点意思。最近又看到几位大神炫酷的 blog,又燃起了个人 blog 的欲望。</p>
<p>反正都是折腾，玩呗！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/20/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zomeone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zomone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/20/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-20T22:15:42+08:00">
                2018-06-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="zomeone" />
            
              <p class="site-author-name" itemprop="name">zomeone</p>
              <p class="site-description motion-element" itemprop="description">程序界的小学生</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zomeone</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
